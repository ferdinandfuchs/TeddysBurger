---
interface GalleryImage {
  image: string;
  caption: string;
  order?: number;
}

interface Props {
  title?: string;
  images?: GalleryImage[];
}

const {
  title = "Galerie",
  images = [],
} = Astro.props;

// Sort images by order (lower numbers first)
const sortedImages = [...images].sort((a, b) => (a.order || 0) - (b.order || 0));
---

<section id="gallery" class="py-16 md:py-24 bg-background">
  <div class="container mx-auto px-4">
    <h2 class="font-heading text-3xl md:text-4xl lg:text-5xl font-bold text-accent mb-8 md:mb-12 text-center">
      {title}
    </h2>

    {sortedImages.length > 0 ? (
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        {sortedImages.map((item) => (
          <div class="group relative overflow-hidden rounded-lg aspect-square">
            <img
              src={item.image}
              alt={item.caption}
              class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
              loading="lazy"
            />
            <!-- Caption overlay on hover -->
            <div class="absolute inset-0 bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-4">
              <p class="text-foreground text-sm font-medium">
                {item.caption}
              </p>
            </div>
          </div>
        ))}
      </div>
    ) : (
      <p class="text-center text-foreground/60">
        Keine Bilder vorhanden.
      </p>
    )}
  </div>
</section>
